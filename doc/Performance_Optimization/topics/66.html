<!--create by iword1.0 pro, http://www.voland.com.cn-->
<!-- saved from url=(0026)http://www.runqian.com.cn/ -->
<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=gb2312">
<title>9.3 Duplicate dimension table</title>
<link rel="stylesheet" href="../images/template.css" type="text/css" />
<link rel="stylesheet" href="document.css" type="text/css" />
<script language="JavaScript" src="../resource/url.js"></script>
</head>

<body>

<div id="content-bg">
	<div id="centent">
	<div id="centent-title"><h2 style='margin-top:8.15pt;margin-right:0cm;margin-bottom:8.15pt;margin-left:
0cm;text-indent:0cm;mso-list:l0 level2 lfo1'><span
lang=EN-US style='mso-fareast-font-family:"Times New Roman"'><span
style='mso-list:Ignore'>9.3<span style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span></span></span><span lang=EN-US>Duplicate dimension table</span></h2></div>
	<p class=MsoNormal><span class=jlqj4b><span lang=EN style='mso-bidi-font-size:
10.5pt;color:black;mso-ansi-language:EN'>Let’s discuss the foreign key
association, starting with the </span></span><span lang=EN-US>small dimension
table, that is, the situation where the dimension table can be loaded into
node’s memory.</span></p>

<p class=MsoNormal><span class=jlqj4b><span lang=EN style='mso-bidi-font-size:
10.5pt;color:black;mso-ansi-language:EN'>So, which node's memory should be used
to hold the dimension table?</span></span></p>

<p class=MsoNormal><span class=jlqj4b><span lang=EN style='mso-bidi-font-size:
10.5pt;color:black;mso-ansi-language:EN'>All nodes’ memory should hold one
copy.</span></span><span lang=EN style='mso-ansi-language:EN'></span></p>

<p class=MsoNormal><span lang=EN-US>Since the fact table under a cluster is
very large and need all nodes to store, while the dimension table record will
be accessed randomly, and hence the fact table on any node may associate with all
dimension tables’ records. If the dimension table was only stored on a certain node,
it would cause a large amount of network transmission. When the dimension table
is small enough, it can be loaded on every node, in this way, the association
operation becomes a local operation.</span></p>

<p class=MsoNormal><span lang=EN-US>This kind of dimension table that has been duplicated
in multiple copies is called the <b>duplicate dimension table</b>.</span></p>

<p class=MsoNormal><span lang=EN-US>Since the small dimension table is not
large, there is no need to store it in multiple zones. Instead, it can be duplicated
and stored in the external storage of every node, and loaded on every node.</span></p>

<table class=MsoNormalTable border=1 cellspacing=0 cellpadding=0 width=642
 style='border-collapse:collapse;mso-table-layout-alt:fixed;border:none;
 mso-border-top-alt:black;mso-border-left-alt:black;mso-border-bottom-alt:#B2B2B2;
 mso-border-right-alt:#B2B2B2;mso-border-style-alt:solid;mso-border-width-alt:
 .5pt;mso-yfti-tbllook:1184;mso-padding-alt:0cm 0cm 0cm 0cm;mso-border-insideh:
 .5pt solid #B2B2B2;mso-border-insidev:.5pt solid #B2B2B2'>
 <tr style='mso-yfti-irow:0;mso-yfti-firstrow:yes;page-break-inside:avoid;
  height:14.15pt'>
  <td width=47 valign=top style='width:1.0cm;border:solid black 1.0pt;
  border-right:solid windowtext 1.0pt;mso-border-alt:solid black .5pt;
  mso-border-right-alt:solid windowtext .5pt;background:#DDDDDD;padding:0cm 0cm 0cm 0cm;
  height:14.15pt'>
  <p class=TabLabel style='margin-top:8.15pt;margin-right:0cm;margin-bottom:
  8.15pt;margin-left:0cm'><span lang=EN-US style='font-family:"Times New Roman","serif"'>&nbsp;</span></p>
  </td>
  <td width=130 valign=top style='width:78.1pt;border:solid windowtext 1.0pt;
  border-left:none;mso-border-left-alt:solid windowtext .5pt;mso-border-alt:
  solid windowtext .5pt;background:#DDDDDD;padding:0cm 0cm 0cm 0cm;height:14.15pt'>
  <p class=TabLabel style='margin-top:8.15pt;margin-right:0cm;margin-bottom:
  8.15pt;margin-left:0cm'><span lang=EN-US style='font-family:"Times New Roman","serif"'>A</span></p>
  </td>
  <td width=475 valign=top style='width:284.85pt;border:solid windowtext 1.0pt;
  border-left:none;mso-border-left-alt:solid windowtext .5pt;mso-border-alt:
  solid windowtext .5pt;background:#DDDDDD;padding:0cm 0cm 0cm 0cm;height:14.15pt'>
  <p class=TabLabel style='margin-top:8.15pt;margin-right:0cm;margin-bottom:
  8.15pt;margin-left:0cm'><span lang=EN-US style='font-family:"Times New Roman","serif"'>B</span></p>
  </td>
 </tr>
 <tr style='mso-yfti-irow:1;page-break-inside:avoid;height:14.15pt'>
  <td width=47 style='width:1.0cm;border-top:none;border-left:solid black 1.0pt;
  border-bottom:solid black 1.0pt;border-right:solid windowtext 1.0pt;
  mso-border-top-alt:solid black .5pt;mso-border-alt:solid black .5pt;
  mso-border-right-alt:solid windowtext .5pt;background:#DDDDDD;padding:0cm 0cm 0cm 0cm;
  height:14.15pt'>
  <p class=TabLabel style='margin-top:8.15pt;margin-right:0cm;margin-bottom:
  8.15pt;margin-left:0cm'><span lang=EN-US style='font-family:"Times New Roman","serif"'>1</span></p>
  </td>
  <td width=605 colspan=2 valign=top style='width:362.95pt;border-top:none;
  border-left:none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  mso-border-top-alt:solid windowtext .5pt;mso-border-left-alt:solid windowtext .5pt;
  mso-border-alt:solid windowtext .5pt;padding:0cm 0cm 0cm 0cm;height:14.15pt'>
  <p class=MsoNormal><span class=code><span lang=EN-US style='mso-bidi-font-size:
  10.5pt;font-family:"Times New Roman","serif";mso-fareast-font-family:楷体;
  font-weight:normal'>[&quot;192.168.0.101:8281&quot;,&quot;192.168.0.102:8281&quot;,…,
  &quot;192.168.0.104:8281&quot;]</span></span></p>
  </td>
 </tr>
 <tr style='mso-yfti-irow:2;page-break-inside:avoid;height:14.15pt'>
  <td width=47 style='width:1.0cm;border-top:none;border-left:solid black 1.0pt;
  border-bottom:solid black 1.0pt;border-right:solid windowtext 1.0pt;
  mso-border-top-alt:solid black .5pt;mso-border-alt:solid black .5pt;
  mso-border-right-alt:solid windowtext .5pt;background:#DDDDDD;padding:0cm 0cm 0cm 0cm;
  height:14.15pt'>
  <p class=TabLabel style='margin-top:8.15pt;margin-right:0cm;margin-bottom:
  8.15pt;margin-left:0cm'><span lang=EN-US style='font-family:"Times New Roman","serif"'>2</span></p>
  </td>
  <td width=130 valign=top style='width:78.1pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  mso-border-top-alt:solid windowtext .5pt;mso-border-left-alt:solid windowtext .5pt;
  mso-border-alt:solid windowtext .5pt;padding:0cm 0cm 0cm 0cm;height:14.15pt'>
  <p class=MsoNormal><span class=code><span lang=EN-US style='mso-bidi-font-size:
  10.5pt;font-family:"Times New Roman","serif";mso-fareast-font-family:楷体;
  font-weight:normal'>fork to(4);A1</span></span></p>
  </td>
  <td width=475 valign=top style='width:284.85pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  mso-border-top-alt:solid windowtext .5pt;mso-border-left-alt:solid windowtext .5pt;
  mso-border-alt:solid windowtext .5pt;padding:0cm 0cm 0cm 0cm;height:14.15pt'>
  <p class=MsoNormal><span class=code><span lang=EN-US style='mso-bidi-font-size:
  10.5pt;font-family:"Times New Roman","serif";mso-fareast-font-family:楷体;
  font-weight:normal'>=file(&quot;product.ctx&quot;).open().import()</span></span></p>
  </td>
 </tr>
 <tr style='mso-yfti-irow:3;page-break-inside:avoid;height:14.15pt'>
  <td width=47 style='width:1.0cm;border-top:none;border-left:solid black 1.0pt;
  border-bottom:solid black 1.0pt;border-right:solid windowtext 1.0pt;
  mso-border-top-alt:solid black .5pt;mso-border-alt:solid black .5pt;
  mso-border-right-alt:solid windowtext .5pt;background:#DDDDDD;padding:0cm 0cm 0cm 0cm;
  height:14.15pt'>
  <p class=TabLabel style='margin-top:8.15pt;margin-right:0cm;margin-bottom:
  8.15pt;margin-left:0cm'><span lang=EN-US style='font-family:"Times New Roman","serif"'>3</span></p>
  </td>
  <td width=130 valign=top style='width:78.1pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  mso-border-top-alt:solid windowtext .5pt;mso-border-left-alt:solid windowtext .5pt;
  mso-border-alt:solid windowtext .5pt;padding:0cm 0cm 0cm 0cm;height:14.15pt'>
  <p class=MsoNormal><span class=code><span lang=EN-US style='mso-bidi-font-size:
  10.5pt;font-family:"Times New Roman","serif";mso-fareast-font-family:楷体;
  font-weight:normal'>&nbsp;</span></span></p>
  </td>
  <td width=475 valign=top style='width:284.85pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  mso-border-top-alt:solid windowtext .5pt;mso-border-left-alt:solid windowtext .5pt;
  mso-border-alt:solid windowtext .5pt;padding:0cm 0cm 0cm 0cm;height:14.15pt'>
  <p class=MsoNormal><span class=code><span lang=EN-US style='mso-bidi-font-size:
  10.5pt;font-family:"Times New Roman","serif";mso-fareast-font-family:楷体;
  font-weight:normal'>&gt;env(PRODUCT,B2)</span></span></p>
  </td>
 </tr>
 <tr style='mso-yfti-irow:4;page-break-inside:avoid;height:14.15pt'>
  <td width=47 style='width:1.0cm;border-top:none;border-left:solid black 1.0pt;
  border-bottom:solid black 1.0pt;border-right:solid windowtext 1.0pt;
  mso-border-top-alt:solid black .5pt;mso-border-alt:solid black .5pt;
  mso-border-right-alt:solid windowtext .5pt;background:#DDDDDD;padding:0cm 0cm 0cm 0cm;
  height:14.15pt'>
  <p class=TabLabel style='margin-top:8.15pt;margin-right:0cm;margin-bottom:
  8.15pt;margin-left:0cm'><span lang=EN-US style='font-family:"Times New Roman","serif"'>4</span></p>
  </td>
  <td width=605 colspan=2 valign=top style='width:362.95pt;border-top:none;
  border-left:none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  mso-border-top-alt:solid windowtext .5pt;mso-border-left-alt:solid windowtext .5pt;
  mso-border-alt:solid windowtext .5pt;padding:0cm 0cm 0cm 0cm;height:14.15pt'>
  <p class=MsoNormal><span class=code><span lang=EN-US style='mso-bidi-font-size:
  10.5pt;font-family:"Times New Roman","serif";mso-fareast-font-family:楷体;
  font-weight:normal'>=memory(A1,PRODUCT)</span></span></p>
  </td>
 </tr>
 <tr style='mso-yfti-irow:5;page-break-inside:avoid;height:14.15pt'>
  <td width=47 style='width:1.0cm;border-top:none;border-left:solid black 1.0pt;
  border-bottom:solid black 1.0pt;border-right:solid windowtext 1.0pt;
  mso-border-top-alt:solid black .5pt;mso-border-alt:solid black .5pt;
  mso-border-right-alt:solid windowtext .5pt;background:#DDDDDD;padding:0cm 0cm 0cm 0cm;
  height:14.15pt'>
  <p class=TabLabel style='margin-top:8.15pt;margin-right:0cm;margin-bottom:
  8.15pt;margin-left:0cm'><span lang=EN-US style='font-family:"Times New Roman","serif"'>5</span></p>
  </td>
  <td width=605 colspan=2 valign=top style='width:362.95pt;border-top:none;
  border-left:none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  mso-border-top-alt:solid windowtext .5pt;mso-border-left-alt:solid windowtext .5pt;
  mso-border-alt:solid windowtext .5pt;padding:0cm 0cm 0cm 0cm;height:14.15pt'>
  <p class=MsoNormal><span class=code><span lang=EN-US style='mso-bidi-font-size:
  10.5pt;font-family:"Times New Roman","serif";mso-fareast-font-family:楷体;
  font-weight:normal'>=file(&quot;orders.ctx&quot;:to(4),A1).open().cursor(p_id,quantity)</span></span></p>
  </td>
 </tr>
 <tr style='mso-yfti-irow:6;page-break-inside:avoid;height:14.15pt'>
  <td width=47 style='width:1.0cm;border-top:none;border-left:solid black 1.0pt;
  border-bottom:solid black 1.0pt;border-right:solid windowtext 1.0pt;
  mso-border-top-alt:solid black .5pt;mso-border-alt:solid black .5pt;
  mso-border-right-alt:solid windowtext .5pt;background:#DDDDDD;padding:0cm 0cm 0cm 0cm;
  height:14.15pt'>
  <p class=TabLabel style='margin-top:8.15pt;margin-right:0cm;margin-bottom:
  8.15pt;margin-left:0cm'><span lang=EN-US style='font-family:"Times New Roman","serif"'>6</span></p>
  </td>
  <td width=605 colspan=2 valign=top style='width:362.95pt;border-top:none;
  border-left:none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  mso-border-top-alt:solid windowtext .5pt;mso-border-left-alt:solid windowtext .5pt;
  mso-border-alt:solid windowtext .5pt;padding:0cm 0cm 0cm 0cm;height:14.15pt'>
  <p class=MsoNormal><span class=code><span lang=EN-US style='mso-bidi-font-size:
  10.5pt;font-family:"Times New Roman","serif";mso-fareast-font-family:楷体;
  font-weight:normal'>=A5.switch(p_id,A4)</span></span></p>
  </td>
 </tr>
 <tr style='mso-yfti-irow:7;mso-yfti-lastrow:yes;page-break-inside:avoid;
  height:14.15pt'>
  <td width=47 style='width:1.0cm;border-top:none;border-left:solid black 1.0pt;
  border-bottom:solid black 1.0pt;border-right:solid windowtext 1.0pt;
  mso-border-top-alt:solid black .5pt;mso-border-alt:solid black .5pt;
  mso-border-right-alt:solid windowtext .5pt;background:#DDDDDD;padding:0cm 0cm 0cm 0cm;
  height:14.15pt'>
  <p class=TabLabel style='margin-top:8.15pt;margin-right:0cm;margin-bottom:
  8.15pt;margin-left:0cm'><span lang=EN-US style='font-family:"Times New Roman","serif"'>7</span></p>
  </td>
  <td width=605 colspan=2 valign=top style='width:362.95pt;border-top:none;
  border-left:none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  mso-border-top-alt:solid windowtext .5pt;mso-border-left-alt:solid windowtext .5pt;
  mso-border-alt:solid windowtext .5pt;padding:0cm 0cm 0cm 0cm;height:14.15pt'>
  <p class=MsoNormal><span class=code><span lang=EN-US style='mso-bidi-font-size:
  10.5pt;font-family:"Times New Roman","serif";mso-fareast-font-family:楷体;
  font-weight:normal'>=A7.groups(p_id.vendor;sum(p_id.price*quantity))</span></span></p>
  </td>
 </tr>
</table>

<p class=MsoNormal><span lang=EN-US>First, use the fork framework to load the
dimension table on every node and name it as a certain global variable. Then,
on the master computer, use the memory() function to create a duplicate
dimension table based on the global variables of all nodes. The subsequent
operations on the cluster table are basically the same as those on a single
machine. For a certain node, the duplicate dimension table is exactly the table
sequence in local memory, which can be used, like the dimension table on a single
machine, in the functions such as switch() and join() to achieve the
addressization. When SPL processes the operation on each node, it will search
this dimension table locally for association.</span></p>

<p class=MsoNormal><span lang=EN-US>The dimension tables are often reused in
multiple computing tasks, and the fork code block can be executed when the node
is started, and the program of master computer could just start from the
establishment of the duplicate dimension tables. For small multi-layer dimension
table, the pre-association can be performed on the node in advance.</span></p>

<p class=MsoNormal><span lang=EN-US>By distinguishing the dimension table and
the fact table, and by means of the smaller feature of dimension table, we can
load the dimension table on every node in advance. Such foreign key association
will not generate network transmission.</span></p>

<p class=MsoNormal><span lang=EN-US>Database does not distinguish between
dimension table and fact table; it generally determines whether to copy the
table to the node based on the size of tables. For the situation of associating
two tables, there is little difference from the above-mentioned scheme if the
database is well-optimized. But when there are more tables or more complex
association layer, the database may be &quot;perplexed&quot;. Some distributed
databases that are not optimized well will store every table in partitions, resulting
in a poorer association performance.</span></p>
	</div>
	<div id="previous-next">
		<div id="next"><a href="67.html">Next</a></div>
		<div id="previous"><a href="65.html">Previous</a></div>		
	</div>
	<div id="related">
		<div class="related-title"><div class="related-title-left"></div>   Related :</div>
		<div class="related-list"><li><span style='font-family:宋体;mso-ascii-font-family:"Times New Roman";mso-hansi-font-family:"Times New Roman"'><a href="63.html">9 Cluster</a></span></li>
</div>
	</div>
	<div id="footer">	
		
		
    <div class="copyright"> Copyright&reg; 2021-2023 <a href="http://www.scudata.com" target="_Blank">SCUDATA Inc. 
      </a></div>
	</div>
</div>

</body>
</html>
