<!--create by iword1.0 pro, http://www.voland.com.cn-->
<!-- saved from url=(0026)http://www.runqian.com.cn/ -->
<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=gb2312">
<title>1.4 Hash index</title>
<link rel="stylesheet" href="../images/template.css" type="text/css" />
<link rel="stylesheet" href="document.css" type="text/css" />
<script language="JavaScript" src="../resource/url.js"></script>
</head>

<body>

<div id="content-bg">
	<div id="centent">
	<div id="centent-title"><h2 style='margin-top:8.15pt;margin-right:0cm;margin-bottom:8.15pt;margin-left:
0cm;text-indent:0cm;mso-list:l0 level2 lfo1'><span
lang=EN-US style='mso-fareast-font-family:"Times New Roman"'><span
style='mso-list:Ignore'>1.4<span style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span></span></span><span lang=EN-US>Hash index</span></h2></div>
	<p class=MsoNormal><b><span lang=EN-US>Hash index</span></b><span lang=EN-US>
can be understood as an extension of sequence number positioning.</span></p>

<p class=MsoNormal><span lang=EN-US>Use a function to calculate the value of to-be-searched
key (TBS key) to a natural number between 1... M, which is called the<b> hash
value</b> of the record. This function is called the <b>hash function</b>.
After grouping the records of table sequence T according to the hash value, a
two-layer sequence H with length M (i.e. group@n() operation of SPL, where
there may be empty members) can be obtained. Now we can use the sequence number
positioning for H, after calculating the hash function of the search value, we
can locate the corresponding grouped subset, and then use the sequential or
binary search in this grouped subset to further find the target value. The
result of this grouping operation to be done in advance is called hash index.</span></p>

<table class=MsoNormalTable border=1 cellspacing=0 cellpadding=0 width=509
 style='border-collapse:collapse;mso-table-layout-alt:fixed;border:none;
 mso-border-top-alt:black;mso-border-left-alt:black;mso-border-bottom-alt:#B2B2B2;
 mso-border-right-alt:#B2B2B2;mso-border-style-alt:solid;mso-border-width-alt:
 .5pt;mso-yfti-tbllook:1184;mso-padding-alt:0cm 0cm 0cm 0cm;mso-border-insideh:
 .5pt solid #B2B2B2;mso-border-insidev:.5pt solid #B2B2B2'>
 <tr style='mso-yfti-irow:0;mso-yfti-firstrow:yes;page-break-inside:avoid;
  height:14.15pt'>
  <td width=47 valign=top style='width:1.0cm;border:solid black 1.0pt;
  border-right:solid windowtext 1.0pt;mso-border-alt:solid black .5pt;
  mso-border-right-alt:solid windowtext .5pt;background:#DDDDDD;padding:0cm 0cm 0cm 0cm;
  height:14.15pt'>
  <p class=TabLabel style='margin-top:8.15pt;margin-right:0cm;margin-bottom:
  8.15pt;margin-left:0cm'><span lang=EN-US style='font-family:"Times New Roman","serif"'>&nbsp;</span></p>
  </td>
  <td width=472 valign=top style='width:282.9pt;border:solid windowtext 1.0pt;
  border-left:none;mso-border-left-alt:solid windowtext .5pt;mso-border-alt:
  solid windowtext .5pt;background:#DDDDDD;padding:0cm 0cm 0cm 0cm;height:14.15pt'>
  <p class=TabLabel style='margin-top:8.15pt;margin-right:0cm;margin-bottom:
  8.15pt;margin-left:0cm'><span lang=EN-US style='font-family:"Times New Roman","serif"'>A</span></p>
  </td>
 </tr>
 <tr style='mso-yfti-irow:1;page-break-inside:avoid;height:14.15pt'>
  <td width=47 style='width:1.0cm;border-top:none;border-left:solid black 1.0pt;
  border-bottom:solid black 1.0pt;border-right:solid windowtext 1.0pt;
  mso-border-top-alt:solid black .5pt;mso-border-alt:solid black .5pt;
  mso-border-right-alt:solid windowtext .5pt;background:#DDDDDD;padding:0cm 0cm 0cm 0cm;
  height:14.15pt'>
  <p class=TabLabel style='margin-top:8.15pt;margin-right:0cm;margin-bottom:
  8.15pt;margin-left:0cm'><span lang=EN-US style='font-family:"Times New Roman","serif"'>1</span></p>
  </td>
  <td width=472 valign=top style='width:282.9pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  mso-border-top-alt:solid windowtext .5pt;mso-border-left-alt:solid windowtext .5pt;
  mso-border-alt:solid windowtext .5pt;padding:0cm 0cm 0cm 0cm;height:14.15pt'>
  <p class=MsoNormal><span class=code><span lang=EN-US style='mso-bidi-font-size:
  10.5pt;font-family:"Times New Roman","serif";mso-fareast-font-family:楷体;
  font-weight:normal'>=20000.sort(rand()).to(10000)</span></span></p>
  </td>
 </tr>
 <tr style='mso-yfti-irow:2;page-break-inside:avoid;height:14.15pt'>
  <td width=47 style='width:1.0cm;border-top:none;border-left:solid black 1.0pt;
  border-bottom:solid black 1.0pt;border-right:solid windowtext 1.0pt;
  mso-border-top-alt:solid black .5pt;mso-border-alt:solid black .5pt;
  mso-border-right-alt:solid windowtext .5pt;background:#DDDDDD;padding:0cm 0cm 0cm 0cm;
  height:14.15pt'>
  <p class=TabLabel style='margin-top:8.15pt;margin-right:0cm;margin-bottom:
  8.15pt;margin-left:0cm'><span lang=EN-US style='font-family:"Times New Roman","serif"'>2</span></p>
  </td>
  <td width=472 valign=top style='width:282.9pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  mso-border-top-alt:solid windowtext .5pt;mso-border-left-alt:solid windowtext .5pt;
  mso-border-alt:solid windowtext .5pt;padding:0cm 0cm 0cm 0cm;height:14.15pt'>
  <p class=MsoNormal><span class=code><span lang=EN-US style='mso-bidi-font-size:
  10.5pt;font-family:"Times New Roman","serif";mso-fareast-font-family:楷体;
  font-weight:normal'>=A1.new(~:id, … )</span></span></p>
  </td>
 </tr>
 <tr style='mso-yfti-irow:3;page-break-inside:avoid;height:14.15pt'>
  <td width=47 style='width:1.0cm;border-top:none;border-left:solid black 1.0pt;
  border-bottom:solid black 1.0pt;border-right:solid windowtext 1.0pt;
  mso-border-top-alt:solid black .5pt;mso-border-alt:solid black .5pt;
  mso-border-right-alt:solid windowtext .5pt;background:#DDDDDD;padding:0cm 0cm 0cm 0cm;
  height:14.15pt'>
  <p class=TabLabel style='margin-top:8.15pt;margin-right:0cm;margin-bottom:
  8.15pt;margin-left:0cm'><span lang=EN-US style='font-family:"Times New Roman","serif"'>3</span></p>
  </td>
  <td width=472 valign=top style='width:282.9pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  mso-border-top-alt:solid windowtext .5pt;mso-border-left-alt:solid windowtext .5pt;
  mso-border-alt:solid windowtext .5pt;padding:0cm 0cm 0cm 0cm;height:14.15pt'>
  <p class=MsoNormal><span class=code><span lang=EN-US style='mso-bidi-font-size:
  10.5pt;font-family:"Times New Roman","serif";mso-fareast-font-family:楷体;
  font-weight:normal'>=A2.group(id%100+1).(~.sort(id))</span></span></p>
  </td>
 </tr>
 <tr style='mso-yfti-irow:4;mso-yfti-lastrow:yes;page-break-inside:avoid;
  height:14.15pt'>
  <td width=47 style='width:1.0cm;border-top:none;border-left:solid black 1.0pt;
  border-bottom:solid black 1.0pt;border-right:solid windowtext 1.0pt;
  mso-border-top-alt:solid black .5pt;mso-border-alt:solid black .5pt;
  mso-border-right-alt:solid windowtext .5pt;background:#DDDDDD;padding:0cm 0cm 0cm 0cm;
  height:14.15pt'>
  <p class=TabLabel style='margin-top:8.15pt;margin-right:0cm;margin-bottom:
  8.15pt;margin-left:0cm'><span lang=EN-US style='font-family:"Times New Roman","serif"'>4</span></p>
  </td>
  <td width=472 valign=top style='width:282.9pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  mso-border-top-alt:solid windowtext .5pt;mso-border-left-alt:solid windowtext .5pt;
  mso-border-alt:solid windowtext .5pt;padding:0cm 0cm 0cm 0cm;height:14.15pt'>
  <p class=MsoNormal><span class=code><span lang=EN-US style='mso-bidi-font-size:
  10.5pt;font-family:"Times New Roman","serif";mso-fareast-font-family:楷体;
  font-weight:normal'>=A3(2345%100+1).select@b1(id-2345)</span></span></p>
  </td>
 </tr>
</table>

<p class=MsoNormal><span lang=EN-US>In A3, the remainder plus 1 is used as the
hash function to divide 10000 records into 100 groups. In A4, use sequence
number positioning first and then use binary search, the amount of data involved
is only 1/100 of the whole data set, and the comparison times will be log<sub>2</sub>100
times less.</span></p>

<p class=MsoNormal><span lang=EN-US>The remainder is also a common hash
function for searched keys of integer types.</span></p>

<p class=MsoNormal><span lang=EN-US>If you are lucky, the number of members of
a member in H (a member of H is a set) is relatively average (close to N/M).
Since the complexity of hash value calculation and sequence number positioning
is O(1), the search complexity after establishing hash index will be reduced by
M times, which is equivalent to search a table sequence with length of N/M. If
you are unlucky, the distribution of the number of members of a member in H is
very uneven, and the hash index search may not improve the performance in
extreme cases, which depends on the design of the hash function and the distribution
of the TBS key values in the original dataset.</span></p>

<p class=MsoNormal><span lang=EN-US>However, luck is usually not too bad. In
most cases, hash index will get better performance improvement. It can even
have more advantages than using binary search after sorting when the original
data is out of order.</span></p>

<p class=MsoNormal><span lang=EN-US>The disadvantage of hash index is that it
needs to occupy memory space to store the index. If you want to speed up, you
need a larger index and it will occupy more space.</span></p>

<p class=MsoNormal><span lang=EN-US>SPL provides a hash index for the primary
key, which will automatically use the system's built-in hash function.</span></p>

<table class=MsoNormalTable border=1 cellspacing=0 cellpadding=0 width=509
 style='border-collapse:collapse;mso-table-layout-alt:fixed;border:none;
 mso-border-top-alt:black;mso-border-left-alt:black;mso-border-bottom-alt:#B2B2B2;
 mso-border-right-alt:#B2B2B2;mso-border-style-alt:solid;mso-border-width-alt:
 .5pt;mso-yfti-tbllook:1184;mso-padding-alt:0cm 0cm 0cm 0cm;mso-border-insideh:
 .5pt solid #B2B2B2;mso-border-insidev:.5pt solid #B2B2B2'>
 <tr style='mso-yfti-irow:0;mso-yfti-firstrow:yes;page-break-inside:avoid;
  height:14.15pt'>
  <td width=47 valign=top style='width:1.0cm;border:solid black 1.0pt;
  border-right:solid windowtext 1.0pt;mso-border-alt:solid black .5pt;
  mso-border-right-alt:solid windowtext .5pt;background:#DDDDDD;padding:0cm 0cm 0cm 0cm;
  height:14.15pt'>
  <p class=TabLabel style='margin-top:8.15pt;margin-right:0cm;margin-bottom:
  8.15pt;margin-left:0cm'><span lang=EN-US style='font-family:"Times New Roman","serif"'>&nbsp;</span></p>
  </td>
  <td width=472 valign=top style='width:282.9pt;border:solid windowtext 1.0pt;
  border-left:none;mso-border-left-alt:solid windowtext .5pt;mso-border-alt:
  solid windowtext .5pt;background:#DDDDDD;padding:0cm 0cm 0cm 0cm;height:14.15pt'>
  <p class=TabLabel style='margin-top:8.15pt;margin-right:0cm;margin-bottom:
  8.15pt;margin-left:0cm'><span lang=EN-US style='font-family:"Times New Roman","serif"'>A</span></p>
  </td>
 </tr>
 <tr style='mso-yfti-irow:1;page-break-inside:avoid;height:14.15pt'>
  <td width=47 style='width:1.0cm;border-top:none;border-left:solid black 1.0pt;
  border-bottom:solid black 1.0pt;border-right:solid windowtext 1.0pt;
  mso-border-top-alt:solid black .5pt;mso-border-alt:solid black .5pt;
  mso-border-right-alt:solid windowtext .5pt;background:#DDDDDD;padding:0cm 0cm 0cm 0cm;
  height:14.15pt'>
  <p class=TabLabel style='margin-top:8.15pt;margin-right:0cm;margin-bottom:
  8.15pt;margin-left:0cm'><span lang=EN-US style='font-family:"Times New Roman","serif"'>1</span></p>
  </td>
  <td width=472 valign=top style='width:282.9pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  mso-border-top-alt:solid windowtext .5pt;mso-border-left-alt:solid windowtext .5pt;
  mso-border-alt:solid windowtext .5pt;padding:0cm 0cm 0cm 0cm;height:14.15pt'>
  <p class=MsoNormal><span class=code><span lang=EN-US style='mso-bidi-font-size:
  10.5pt;font-family:"Times New Roman","serif";mso-fareast-font-family:楷体;
  font-weight:normal'>=20000.sort(rand()).to(10000)</span></span></p>
  </td>
 </tr>
 <tr style='mso-yfti-irow:2;page-break-inside:avoid;height:14.15pt'>
  <td width=47 style='width:1.0cm;border-top:none;border-left:solid black 1.0pt;
  border-bottom:solid black 1.0pt;border-right:solid windowtext 1.0pt;
  mso-border-top-alt:solid black .5pt;mso-border-alt:solid black .5pt;
  mso-border-right-alt:solid windowtext .5pt;background:#DDDDDD;padding:0cm 0cm 0cm 0cm;
  height:14.15pt'>
  <p class=TabLabel style='margin-top:8.15pt;margin-right:0cm;margin-bottom:
  8.15pt;margin-left:0cm'><span lang=EN-US style='font-family:"Times New Roman","serif"'>2</span></p>
  </td>
  <td width=472 valign=top style='width:282.9pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  mso-border-top-alt:solid windowtext .5pt;mso-border-left-alt:solid windowtext .5pt;
  mso-border-alt:solid windowtext .5pt;padding:0cm 0cm 0cm 0cm;height:14.15pt'>
  <p class=MsoNormal><span class=code><span lang=EN-US style='mso-bidi-font-size:
  10.5pt;font-family:"Times New Roman","serif";mso-fareast-font-family:楷体;
  font-weight:normal'>=A1.new(~:id, … ).keys@i(id)</span></span></p>
  </td>
 </tr>
 <tr style='mso-yfti-irow:3;page-break-inside:avoid;height:14.15pt'>
  <td width=47 style='width:1.0cm;border-top:none;border-left:solid black 1.0pt;
  border-bottom:solid black 1.0pt;border-right:solid windowtext 1.0pt;
  mso-border-top-alt:solid black .5pt;mso-border-alt:solid black .5pt;
  mso-border-right-alt:solid windowtext .5pt;background:#DDDDDD;padding:0cm 0cm 0cm 0cm;
  height:14.15pt'>
  <p class=TabLabel style='margin-top:8.15pt;margin-right:0cm;margin-bottom:
  8.15pt;margin-left:0cm'><span lang=EN-US style='font-family:"Times New Roman","serif"'>3</span></p>
  </td>
  <td width=472 valign=top style='width:282.9pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  mso-border-top-alt:solid windowtext .5pt;mso-border-left-alt:solid windowtext .5pt;
  mso-border-alt:solid windowtext .5pt;padding:0cm 0cm 0cm 0cm;height:14.15pt'>
  <p class=MsoNormal><span class=code><span lang=EN-US style='mso-bidi-font-size:
  10.5pt;font-family:"Times New Roman","serif";mso-fareast-font-family:楷体;
  font-weight:normal'>=A2.find(12345)</span></span></p>
  </td>
 </tr>
 <tr style='mso-yfti-irow:4;page-break-inside:avoid;height:14.15pt'>
  <td width=47 style='width:1.0cm;border-top:none;border-left:solid black 1.0pt;
  border-bottom:solid black 1.0pt;border-right:solid windowtext 1.0pt;
  mso-border-top-alt:solid black .5pt;mso-border-alt:solid black .5pt;
  mso-border-right-alt:solid windowtext .5pt;background:#DDDDDD;padding:0cm 0cm 0cm 0cm;
  height:14.15pt'>
  <p class=TabLabel style='margin-top:8.15pt;margin-right:0cm;margin-bottom:
  8.15pt;margin-left:0cm'><span lang=EN-US style='font-family:"Times New Roman","serif"'>4</span></p>
  </td>
  <td width=472 valign=top style='width:282.9pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  mso-border-top-alt:solid windowtext .5pt;mso-border-left-alt:solid windowtext .5pt;
  mso-border-alt:solid windowtext .5pt;padding:0cm 0cm 0cm 0cm;height:14.15pt'>
  <p class=MsoNormal><span class=code><span lang=EN-US style='mso-bidi-font-size:
  10.5pt;font-family:"Times New Roman","serif";mso-fareast-font-family:楷体;
  font-weight:normal'>=A1.new(~:id, … ).keys@i(id;100)</span></span></p>
  </td>
 </tr>
 <tr style='mso-yfti-irow:5;mso-yfti-lastrow:yes;page-break-inside:avoid;
  height:14.15pt'>
  <td width=47 style='width:1.0cm;border-top:none;border-left:solid black 1.0pt;
  border-bottom:solid black 1.0pt;border-right:solid windowtext 1.0pt;
  mso-border-top-alt:solid black .5pt;mso-border-alt:solid black .5pt;
  mso-border-right-alt:solid windowtext .5pt;background:#DDDDDD;padding:0cm 0cm 0cm 0cm;
  height:14.15pt'>
  <p class=TabLabel style='margin-top:8.15pt;margin-right:0cm;margin-bottom:
  8.15pt;margin-left:0cm'><span lang=EN-US style='font-family:"Times New Roman","serif"'>5</span></p>
  </td>
  <td width=472 valign=top style='width:282.9pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  mso-border-top-alt:solid windowtext .5pt;mso-border-left-alt:solid windowtext .5pt;
  mso-border-alt:solid windowtext .5pt;padding:0cm 0cm 0cm 0cm;height:14.15pt'>
  <p class=MsoNormal><span class=code><span lang=EN-US style='mso-bidi-font-size:
  10.5pt;font-family:"Times New Roman","serif";mso-fareast-font-family:楷体;
  font-weight:normal'>=A4.find(23456)</span></span></p>
  </td>
 </tr>
</table>

<p class=MsoNormal><span lang=EN-US>When setting the primary key, you can use @i
to create an index at the same time. If there is an index in place, the find()
function will use it automatically. When creating an index, you can also use parameters
to control the length of the hash index (i.e., M value). You can try the impact
of different hash index lengths on performance.</span></p>
	</div>
	<div id="previous-next">
		<div id="next"><a href="7.html">Next</a></div>
		<div id="previous"><a href="5.html">Previous</a></div>		
	</div>
	<div id="related">
		<div class="related-title"><div class="related-title-left"></div>   Related :</div>
		<div class="related-list"><li><span style='font-family:宋体;mso-ascii-font-family:"Times New Roman";mso-hansi-font-family:"Times New Roman"'><a href="2.html">1 In-memory search</a></span></li>
</div>
	</div>
	<div id="footer">	
		
		
    <div class="copyright"> Copyright&reg; 2021-2023 <a href="http://www.scudata.com" target="_Blank">SCUDATA Inc. 
      </a></div>
	</div>
</div>

</body>
</html>
